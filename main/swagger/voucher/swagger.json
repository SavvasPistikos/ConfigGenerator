{"swagger":"2.0","info":{"description":"API specification","version":"1.0","title":"voucher-system"},"tags":[{"name":"Voucher Operations v1.0"}],"schemes":["http"],"paths":{"/api/v1.0/vouchers/{voucherId}/redemption":{"put":{"tags":["Voucher Operations v1.0"],"summary":"Redeem a voucher. Available only for vouchers of normal type.","description":"","operationId":"redeemVoucher","produces":["application/json"],"parameters":[{"name":"voucherId","in":"path","description":"The voucher id","required":true,"type":"string"},{"name":"guid","in":"header","required":true,"type":"string"},{"name":"channel","in":"header","required":true,"type":"integer","minimum":0,"format":"int32"},{"name":"operator","in":"header","required":true,"type":"integer","minimum":0,"format":"int32"},{"name":"retailerId","in":"header","required":false,"type":"integer","minimum":0,"format":"int32"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/VoucherDTO"},"responseSchema":{"$ref":"#/definitions/VoucherDTO"}},"400":{"description":"Bad request\r\n| Error code | Description |\r\n| :-: | - |\r\n| 26 | Validation Error: [...] |\r\n","schema":{"$ref":"#/definitions/FaultInfo"},"responseSchema":{"$ref":"#/definitions/FaultInfo"}},"401":{"description":"Unauthorized\r\n| Error code | Description |\r\n| :-: | - |\r\n| - | Full authentication is required to access this resource |\r\n| - | Access token expired: {token} |\r\n"},"404":{"description":"Not found\r\n| Error code | Description |\r\n| :-: | - |\r\n| - | Not found |\r\n| 30 | Entity of class: {class}, id: {id} not found |\r\n","schema":{"$ref":"#/definitions/FaultInfo"},"responseSchema":{"$ref":"#/definitions/FaultInfo"}},"500":{"description":"Internal server error\r\n| Error code | Description |\r\n| :-: | - |\r\n| 25 | System Error |\r\n| 15001 | Action is allowed only at the retailer that created the voucher |\r\n| 15002 | Action not allowed, voucher is not active |","schema":{"$ref":"#/definitions/FaultInfo"},"responseSchema":{"$ref":"#/definitions/FaultInfo"}},"502":{"description":"Bad Gateway"},"503":{"description":"Service Unavailable"}}}},"/api/v1.0/vouchers/{voucherId}/cashout":{"put":{"tags":["Voucher Operations v1.0"],"summary":"Cashout a voucher. Available only for vouchers of cashout type.","description":"","operationId":"cashoutVoucher","produces":["application/json"],"parameters":[{"name":"voucherId","in":"path","description":"The voucher id","required":true,"type":"string"},{"name":"guid","in":"header","required":true,"type":"string"},{"name":"channel","in":"header","required":true,"type":"integer","minimum":0,"format":"int32"},{"name":"operator","in":"header","required":true,"type":"integer","minimum":0,"format":"int32"},{"name":"retailerId","in":"header","required":false,"type":"integer","minimum":0,"format":"int32"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/VoucherDTO"},"responseSchema":{"$ref":"#/definitions/VoucherDTO"}},"400":{"description":"Bad request\r\n| Error code | Description |\r\n| :-: | - |\r\n| 26 | Validation Error: [...] |\r\n","schema":{"$ref":"#/definitions/FaultInfo"},"responseSchema":{"$ref":"#/definitions/FaultInfo"}},"401":{"description":"Unauthorized\r\n| Error code | Description |\r\n| :-: | - |\r\n| - | Full authentication is required to access this resource |\r\n| - | Access token expired: {token} |\r\n"},"404":{"description":"Not found\r\n| Error code | Description |\r\n| :-: | - |\r\n| - | Not found |\r\n| 30 | Entity of class: {class}, id: {id} not found |\r\n","schema":{"$ref":"#/definitions/FaultInfo"},"responseSchema":{"$ref":"#/definitions/FaultInfo"}},"500":{"description":"Internal server error\r\n| Error code | Description |\r\n| :-: | - |\r\n| 25 | System Error |\r\n| 15001 | Action is allowed only at the retailer that created the voucher |\r\n| 15002 | Action not allowed, voucher is not active |","schema":{"$ref":"#/definitions/FaultInfo"},"responseSchema":{"$ref":"#/definitions/FaultInfo"}},"502":{"description":"Bad Gateway"},"503":{"description":"Service Unavailable"}}}},"/api/v1.0/vouchers/{voucherId}/cancellation":{"put":{"tags":["Voucher Operations v1.0"],"summary":"Cancel a voucher","description":"","operationId":"cancelVoucher","produces":["application/json"],"parameters":[{"name":"voucherId","in":"path","description":"The voucher id","required":true,"type":"string"},{"name":"guid","in":"header","required":true,"type":"string"},{"name":"channel","in":"header","required":true,"type":"integer","minimum":0,"format":"int32"},{"name":"operator","in":"header","required":true,"type":"integer","minimum":0,"format":"int32"},{"name":"retailerId","in":"header","required":false,"type":"integer","minimum":0,"format":"int32"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/VoucherDTO"},"responseSchema":{"$ref":"#/definitions/VoucherDTO"}},"400":{"description":"Bad request\r\n| Error code | Description |\r\n| :-: | - |\r\n| 26 | Validation Error: [...] |\r\n","schema":{"$ref":"#/definitions/FaultInfo"},"responseSchema":{"$ref":"#/definitions/FaultInfo"}},"401":{"description":"Unauthorized\r\n| Error code | Description |\r\n| :-: | - |\r\n| - | Full authentication is required to access this resource |\r\n| - | Access token expired: {token} |\r\n"},"404":{"description":"Not found\r\n| Error code | Description |\r\n| :-: | - |\r\n| - | Not found |\r\n| 30 | Entity of class: {class}, id: {id} not found |\r\n","schema":{"$ref":"#/definitions/FaultInfo"},"responseSchema":{"$ref":"#/definitions/FaultInfo"}},"500":{"description":"Internal server error\r\n| Error code | Description |\r\n| :-: | - |\r\n| 25 | System Error |\r\n| 15001 | Action is allowed only at the retailer that created the voucher |\r\n| 15002 | Action not allowed, voucher is not active |","schema":{"$ref":"#/definitions/FaultInfo"},"responseSchema":{"$ref":"#/definitions/FaultInfo"}},"502":{"description":"Bad Gateway"},"503":{"description":"Service Unavailable"}}}},"/api/v1.0/vouchers":{"get":{"tags":["Voucher Operations v1.0"],"summary":"Get vouchers","description":"","operationId":"findVouchers","produces":["application/json"],"parameters":[{"name":"guid","in":"header","required":true,"type":"string"},{"name":"channel","in":"header","required":true,"type":"integer","minimum":0,"format":"int32"},{"name":"operator","in":"header","required":true,"type":"integer","minimum":0,"format":"int32"},{"name":"retailerId","in":"query","required":false,"type":"integer","minimum":0,"format":"int32"},{"name":"terminalId","in":"query","required":false,"type":"integer","minimum":0,"format":"int32"},{"name":"employeeId","in":"query","required":false,"type":"integer","minimum":0,"format":"int32"},{"name":"type","in":"query","required":false,"type":"string","enum":["normal","cashout"]},{"name":"status","in":"query","required":false,"type":"string","enum":["active","canceled","redeemed","cashedout"]},{"name":"fromDate","in":"query","description":"Creation date from in UTC in milliseconds","required":true,"type":"integer","minimum":0,"format":"int64"},{"name":"toDate","in":"query","description":"Creation date to in UTC in milliseconds","required":true,"type":"integer","minimum":0,"format":"int64"},{"name":"page","in":"query","description":"Page number","required":false,"type":"integer","default":0},{"name":"limit","in":"query","description":"Results per page","required":false,"type":"integer","default":10,"maximum":500,"minimum":1},{"name":"sort","in":"query","description":"Sorting order. Options: asc, desc. Default is desc.","required":false,"type":"string","default":"desc"},{"name":"column","in":"query","description":"Sorting column. Options: retailerId, creationDate.","required":false,"type":"string","default":"retailerId"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/VoucherDTO"},"responseSchema":{"$ref":"#/definitions/VoucherDTO"}},"400":{"description":"Bad request\r\n| Error code | Description |\r\n| :-: | - |\r\n| 26 | Validation Error: [...] |\r\n","schema":{"$ref":"#/definitions/FaultInfo"},"responseSchema":{"$ref":"#/definitions/FaultInfo"}},"401":{"description":"Unauthorized\r\n| Error code | Description |\r\n| :-: | - |\r\n| - | Full authentication is required to access this resource |\r\n| - | Access token expired: {token} |\r\n"},"404":{"description":"Not found\r\n| Error code | Description |\r\n| :-: | - |\r\n| - | Not found |\r\n| 30 | Entity of class: {class}, id: {id} not found |\r\n","schema":{"$ref":"#/definitions/FaultInfo"},"responseSchema":{"$ref":"#/definitions/FaultInfo"}},"500":{"description":"Internal server error\r\n| Error code | Description |\r\n| :-: | - |\r\n| 25 | System Error |","schema":{"$ref":"#/definitions/FaultInfo"},"responseSchema":{"$ref":"#/definitions/FaultInfo"}},"502":{"description":"Bad Gateway"},"503":{"description":"Service Unavailable"}}},"post":{"tags":["Voucher Operations v1.0"],"summary":"Create a voucher","description":"","operationId":"registerVoucher","produces":["application/json"],"parameters":[{"name":"guid","in":"header","required":true,"type":"string"},{"name":"channel","in":"header","required":true,"type":"integer","minimum":0,"format":"int32"},{"name":"operator","in":"header","required":true,"type":"integer","minimum":0,"format":"int32"},{"name":"retailerId","in":"header","required":false,"type":"integer","minimum":0,"format":"int32"},{"name":"terminalId","in":"header","required":false,"type":"integer","minimum":0,"format":"int32"},{"name":"employeeId","in":"header","required":false,"type":"integer","minimum":0,"format":"int32"},{"in":"body","name":"body","description":"The voucher data","required":false,"schema":{"$ref":"#/definitions/VoucherRegistrationRequest"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/VoucherDTO"},"responseSchema":{"$ref":"#/definitions/VoucherDTO"}},"400":{"description":"Bad request\r\n| Error code | Description |\r\n| :-: | - |\r\n| 26 | Validation Error: [...] |\r\n","schema":{"$ref":"#/definitions/FaultInfo"},"responseSchema":{"$ref":"#/definitions/FaultInfo"}},"401":{"description":"Unauthorized\r\n| Error code | Description |\r\n| :-: | - |\r\n| - | Full authentication is required to access this resource |\r\n| - | Access token expired: {token} |\r\n"},"500":{"description":"Internal server error\r\n| Error code | Description |\r\n| :-: | - |\r\n| 25 | System Error |","schema":{"$ref":"#/definitions/FaultInfo"},"responseSchema":{"$ref":"#/definitions/FaultInfo"}},"502":{"description":"Bad Gateway"},"503":{"description":"Service Unavailable"}}}},"/api/v1.0/vouchers/{voucherId}":{"get":{"tags":["Voucher Operations v1.0"],"summary":"Get voucher by id","description":"","operationId":"findVoucherById","produces":["application/json"],"parameters":[{"name":"voucherId","in":"path","description":"The voucher id","required":true,"type":"string"},{"name":"guid","in":"header","required":true,"type":"string"},{"name":"channel","in":"header","required":true,"type":"integer","minimum":0,"format":"int32"},{"name":"operator","in":"header","required":true,"type":"integer","minimum":0,"format":"int32"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/VoucherDTO"},"responseSchema":{"$ref":"#/definitions/VoucherDTO"}},"400":{"description":"Bad request\r\n| Error code | Description |\r\n| :-: | - |\r\n| 26 | Validation Error: [...] |\r\n","schema":{"$ref":"#/definitions/FaultInfo"},"responseSchema":{"$ref":"#/definitions/FaultInfo"}},"401":{"description":"Unauthorized\r\n| Error code | Description |\r\n| :-: | - |\r\n| - | Full authentication is required to access this resource |\r\n| - | Access token expired: {token} |\r\n"},"404":{"description":"Not found\r\n| Error code | Description |\r\n| :-: | - |\r\n| - | Not found |\r\n| 30 | Entity of class: {class}, id: {id} not found |\r\n","schema":{"$ref":"#/definitions/FaultInfo"},"responseSchema":{"$ref":"#/definitions/FaultInfo"}},"500":{"description":"Internal server error\r\n| Error code | Description |\r\n| :-: | - |\r\n| 25 | System Error |","schema":{"$ref":"#/definitions/FaultInfo"},"responseSchema":{"$ref":"#/definitions/FaultInfo"}},"502":{"description":"Bad Gateway"},"503":{"description":"Service Unavailable"}}}}},"definitions":{"VoucherDTO":{"type":"object","required":["amount","status","type","voucherId"],"properties":{"voucherId":{"type":"string","description":"The unique id of the voucher"},"amount":{"type":"number","format":"double","description":"The amount"},"retailerId":{"type":"integer","format":"int32","description":"The retailer id"},"terminalId":{"type":"integer","format":"int32","description":"The terminal id"},"userId":{"type":"integer","format":"int32","description":"The user id"},"type":{"type":"string","description":"The type of the voucher","enum":["normal","cashout"]},"status":{"type":"string","description":"The current status of the voucher","enum":["active","canceled","redeemed","cashedout"]}}},"FaultInfo":{"type":"object","properties":{"code":{"type":"integer","format":"int32","description":"The error code"},"message":{"type":"string","description":"The error message"},"data":{"type":"array","description":"The error data which is an abstract object that may be used to provide any error metadata","items":{"type":"object"}},"source":{"type":"string","description":"The application at which the API error occured"},"type":{"type":"string","description":"The error family, e.g. RUNTIME, VALIDATION, etc"}},"description":"The FaultInfo object contains all the details assosiated with an API error"},"VoucherRegistrationRequest":{"type":"object","required":["amount","type"],"properties":{"amount":{"type":"number","description":"The amount","minimum":0,"exclusiveMinimum":true},"type":{"type":"string","description":"The type of the voucher","enum":["normal","cashout"]}}},"Page":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"type":"object"}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/definitions/Sort"},"numberOfElements":{"type":"integer","format":"int32"},"first":{"type":"boolean"},"pageable":{"$ref":"#/definitions/Pageable"},"last":{"type":"boolean"}}},"PageVoucherDTO":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/definitions/VoucherDTO"}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/definitions/Sort"},"numberOfElements":{"type":"integer","format":"int32"},"first":{"type":"boolean"},"pageable":{"$ref":"#/definitions/Pageable"},"last":{"type":"boolean"}}},"Pageable":{"type":"object","properties":{"offset":{"type":"integer","format":"int64"},"sort":{"$ref":"#/definitions/Sort"},"unpaged":{"type":"boolean"},"paged":{"type":"boolean"},"pageSize":{"type":"integer","format":"int32"},"pageNumber":{"type":"integer","format":"int32"}}},"Sort":{"type":"object","properties":{"sorted":{"type":"boolean"},"unsorted":{"type":"boolean"}}}}}